@model IEnumerable<MVCProject.Models.Post>

@{
    ViewBag.Title = "Index";
}

@section MainContent{
    <div class="main-content">
        <h2>Index</h2>

        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
@if (ViewContext.HttpContext.User.IsInRole("admin"))
{<table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Title)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Description)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Author.UserName)
                </th>
                <th>
                    Tags
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Author.UserName)
                    </td>
                    <td>
                        @foreach (var tag in item.Tags)
                        {
                            <span> @tag.TagName</span>
                        }
                    </td>
                    <td>
                        @if (item.File != null)
                        {
                            <a href="~/Uploads/@item.File"><img class="post-image" src="~/Uploads/@item.File" /></a>
                        }
                        else
                        {
                            <img src="../../Content/pictures/filen.png" alt="без файла изображения" class="tdImage" />
                        }
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.PostId }) |
                        @Html.ActionLink("Details", "Details", new { id = item.PostId }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.PostId })
                    </td>
                </tr>
            }

        </table>
}

@if (ViewContext.HttpContext.User.IsInRole("user"))
{
    <div class="main-content">
        <div id="gallery">
            
            @foreach (var item in Model)
            {
                

                if (item.File != null)
                {
                    <a href="~/Uploads/@item.File"><img class="post-image" src="~/Uploads/@item.File" /></a>
                }
                else
                {
                    <img src="../../Content/pictures/filen.png" alt="без файла изображения" class="tdImage" />
                }

                //@Html.ActionLink("Удалить", "Delete", new { id = item.Id })

            }
        </div>
    </div>
}

    </div>
}
